# Zde je sada praktických úloh a cvičení na práci se soubory v Pythonu – ideální pro procvičení základních dovedností podle předchozího přehledu.
from pathlib import Path
import os
import time

# 1. Zjišťování a manipulace s cestami
""" 
- Vypiš aktuální pracovní adresář.
- Zjisti domovskou složku uživatele.
- Vytvoř podadresář "test_soubory" ve své domovské složce (použij `pathlib` i `os`).
- Sestav absolutní cestu k souboru `"example.txt"` v této nové složce.
"""
print(f"Aktuální adresář: {Path.cwd()}")

print(f"Domovský adresář je {Path.home()}")

os.makedirs('test_soubory', exists_ok=True)

test_dir= Path.home()/"test_soubory"
test_dir.mkdir(parents=True)

file_path= test_dir/"example.txt"
Path(file_path).absolute()


# 2. Práce s jednotlivými částmi cesty
""" 
- Vytvoř nějakou cestu ke zvolenému souboru (`data.txt`) a vypiš:
  - Kořen (anchor)
  - Nadřazenou složku (parent)
  - Název souboru (name)
  - Příponu (suffix)
  - Seznam všech částí cesty (`parts`)
- Spočítej, kolik rodičovských složek má aktuální pracovní adresář.
 """
p= Path('C:/Users/Al/spam.txt')
print(f"Kořen: {p.anchor}")
print(f"Nadřazená složka: {p.parent}")
print(f"Název souboru: {p.name}")
print(f"Přípona: {p.suffix}")
print(f"Seznam částí: {p.parts}")

parents= Path.cwd().parents
print(f"Počet rodičovských složek je {len(parents)}")

### 3. Kontrola existence a typu cesty
""" 
- Ověř, zda cesta `"test_soubory"` existuje a je složka.
- Zkus zkontrolovat neexistující složku a interpretuj výsledek.
- Zjisti, zda existuje nějaký soubor `"example.txt"`, a zda je to soubor.
 """
if test_dir.exists() and test_dir.is_dire():
    print("Ano, existuje a je složka")
elif !=test_dir.exists():
    print("Neexistuje")
else:
    print("Existuje, ale není složka")

if neexistujici_slozka.exists():
    print("Složka existuje")
else:
    print("Složka neexistuje")

if file_path.exists() and test_dir.is_file():
    print("Ano, existuje a je složka")
elif !=test_dir.exists():
    print("Neexistuje")
else:
    print("Existuje, ale není složka")

### 4. Vyhledávání souborů - glob
""" 
- Pomocí `glob('*')` vypiš všechny soubory a složky ve složce `"test_soubory"`.
- Vytvoř ve složce `"test_soubory"` několik souborů různých typů (např. `"a.txt"`, `"b.csv"`, `"obrazek.png"`).
- Najdi všechny textové soubory (`*.txt`) ve složce a vypiš jejich jména.
"""
for item in test_dir.glob('*'):
    print(item.name)

# soubory ve složce test_soubory

(test_dir/"a.txt").write_text("bla bla")
(test_dir/"b.csv").write_text("23")
(test_dir/"obrazek.png").write_text("neco")

list(test_dir.glob('*.txt'))
for name in test_dir.glob('*'):
    print(name)

### 5. Zápis a čtení textových souborů
""" 
- Vytvoř a zapiš do souboru `"test_soubory/pokus.txt"` větu dle vlastního výběru.
- Do stejného souboru při dalším spuštění přidej na konec další řádek.
- Soubor znovu načti a vypiš celý jeho obsah.
- Pomocí metody `readlines()` získej seznam všech řádků ze souboru a vypiš počet řádků.
"""
test_soubory= open('text_soubory/pokus.txt', 'w', encoding='UTF-8')
test_soubory.write('Bla bla\n')
test_soubory.close()

test_soubory= open('text_soubory/pokus.txt', 'a', encoding='UTF-8')
test_soubory.write('Přidaný řádek')
test_soubory.close()

test_soubory= open('text_soubory/pokus.txt','r', encoding='UTF-8')
obsah= text_soubory.read()
print(f"Obsah souboru{obsah}")
test_soubory.close()

test_soubory= open('text_soubory/pokus.txt','r', encoding='UTF-8')
radky= test_soubory.readlines()
print(f"Počet řádků je:{len(radky)}")
test_soubory.close()
### 6. Bezpečná práce se soubory pomocí `with`
""" 
- Přepiš předchozí úlohu tak, aby otevření a zápis do souboru proběhl uvnitř konstrukce `with`.
- Ověř, že soubor je po ukončení bloku zavřený (zkus zápis mimo blok – co se stane?).
"""
with open ('text_soubory/pokus.txt, 'w', encoding='UTF-8') as file_obj:
    file_obj.write('Bla bla\n')

with open ('text_soubory/pokus.txt, 'a', encoding='UTF-8') as file_obj:
    file_obj.write('Přidaný řádek')

with open ('text_soubory/pokus.txt, encoding='UTF-8') as file_obj:
    obsah=file_obj.read()
    print(f"Obsah souboru:{obsah}")

with open ('text_soubory/pokus.txt, encoding='UTF-8') as file_obj:
    radky=file_obj.readlines()
    print(f"Počet řádků je:{len(radky)}")
### 7. Domácí úkol (volitelný)
""" 
- Vytvoř program, který zadanou složku rekurzivně projde a vypíše názvy všech souborů s příponou `.py`.
- Rozšiř: Ke každému souboru vypiš ještě datum poslední úpravy a velikost v KB.
"""
def projiti_souboru (cesta):
    cesta=Path(cesta)
    for soubor in cesta.glob('*.py'):
        velikost= soubor.stat().st_size/1024
        cas_posledni_zmeny=time.asctime(soubor.stat().st_mtime)
        print(f"soubor {soubor} má velikost {velikost}KB a naposledy byl změněn {cas_posledni_zmeny}")

projiti_souboru(Path.home())